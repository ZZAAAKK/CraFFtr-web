(this.webpackJsonpcrafftr=this.webpackJsonpcrafftr||[]).push([[0],{26:function(e,t,n){},27:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var r=n(1),i=n.n(r),a=n(19),s=n.n(a),c=(n(26),n(4)),o=n(5),l=n(11),h=n(7),p=n(6),u=n(20),d=n(2),j=(n(27),n(0)),m=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).handleClick=function(){e.props.handleClick(e.state.result)},e.state={result:[]},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.setState({result:this.props.result})}},{key:"render",value:function(){return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("tr",{className:this.props.selectedObj.ID===this.state.result.ID?"row selected":"row",children:Object(j.jsx)("td",{onClick:this.handleClick,children:this.state.result.Name})})})}}]),n}(r.Component),g=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).handleSearch=function(t){t.preventDefault(),e.props.performSearch()},e.handleChange=function(t){e.props.updateSearchTerm(t.target.value)},e.handleClick=function(t){e.props.updateSelectedObj(t)},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props.searchResults.filter((function(e){return"Item"===e.UrlType}));t=t.map((function(t,n){return Object(j.jsx)(i.a.Fragment,{children:Object(j.jsx)(m,{result:t,filterBy:"item",handleClick:e.handleClick,selectedObj:e.props.selectedObj})},n)}));var n=this.props.searchResults.filter((function(e){return"Recipe"===e.UrlType}));return n=n.map((function(t,n){return Object(j.jsx)(i.a.Fragment,{children:Object(j.jsx)(m,{result:t,filterBy:"recipe",handleClick:e.handleClick,selectedObj:e.props.selectedObj})},n)})),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("form",{id:"searchForm",onSubmit:this.handleSearch,children:[Object(j.jsx)("p",{children:"Search for an item to get started:"}),Object(j.jsx)("input",{type:"text",placeholder:"Type here to search...",value:this.props.searchString,onChange:this.handleChange}),Object(j.jsx)("button",{type:"submit",className:"",children:"Search"})]}),Object(j.jsx)("p",{className:0===t.length?"invisible":""}),Object(j.jsxs)("table",{className:0===t.length?"invisible":"table",children:[Object(j.jsx)("thead",{children:Object(j.jsx)("tr",{className:"row header",children:Object(j.jsx)("th",{children:"Items"})})}),Object(j.jsx)("tbody",{children:t})]}),Object(j.jsx)("p",{className:0===n.length?"invisible":""}),Object(j.jsxs)("table",{className:0===n.length?"invisible":"table",children:[Object(j.jsx)("thead",{children:Object(j.jsx)("tr",{className:"row header",children:Object(j.jsx)("th",{children:"Recipes"})})}),Object(j.jsx)("tbody",{children:n})]})]})}}]),n}(r.Component),b=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).state={itemToBeCrafted:[],ingredientAmounts:[],ingredients:[]},e}return Object(o.a)(n,[{key:"render",value:function(){if(this.props.obj.hasOwnProperty("AmountIngredient0")){var e=[],t=[],n=[];for(var r in[0,1,2,3,4,5,6,7,8,9])e.push(this.props.obj["AmountIngredient".concat(r)]),t.push(this.props.obj["ItemIngredient".concat(r)]),n.push(this.props.obj["ItemIngredientRecipe".concat(r)]);return console.log(this.props.obj.ItemResult.Name),console.log(e),console.log(t),console.log(n),Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("ul",{children:e.map((function(e,r){if(e>0)return Object(j.jsxs)("li",{children:[t[r].Name," (x",e,")",null!==n[r]?" [is a recipe]":""]})}))})})}return Object(j.jsx)("div",{className:"invisible"})}}]),n}(r.Component),O=n(14),f=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=window.innerWidth>420?1:.75;return Object(j.jsxs)("div",{className:this.props.selectedRegion.includes(this.props.nodes[0].TerritoryType.Map.PlaceName.Name)?"":"invisible",id:"map-container",children:[Object(j.jsx)("img",{id:"map",src:this.props.url,alt:"Map"}),this.props.nodes.map((function(n,r){return Object(j.jsx)("img",{src:"https://xivapi.com".concat(n.GatheringPointBase.GatheringType.IconMain),alt:"i",style:{position:"absolute",width:32*t,height:32*t,top:e.props.mapData.filter((function(e){return e.ID===n.ID}))[0].PixelY/(window.innerWidth>420?2:5.12)-16*t,left:e.props.mapData.filter((function(e){return e.ID===n.ID}))[0].PixelX/(window.innerWidth>420?2:5.12)-16*t}},r)}))]})}}]),n}(r.Component),I=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).state={gatheringPoints:[],gatheringPointData:[]},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=this;fetch("https://xivapi.com/GatheringPoint?limit=-1&columns=ID,GatheringPointBase.ID,GatheringPointBase.GatheringLevel,GatheringPointBase.GatheringType.ID,GatheringPointBase.GatheringType.Name,GatheringPointBase.GatheringType.IconMain,TerritoryType.Map.ID,TerritoryType.Map.PlaceNameRegion.Name,TerritoryType.Map.PlaceName.Name,GatheringPointBase.Item0.Item.ID,GatheringPointBase.Item1.Item.ID,GatheringPointBase.Item2.Item.ID,GatheringPointBase.Item3.Item.ID,GatheringPointBase.Item4.Item.ID,GatheringPointBase.Item5.Item.ID,GatheringPointBase.Item6.Item.ID,GatheringPointBase.Item7.Item.ID,PlaceName.Name,TerritoryType.Map.MapFilename",{mode:"cors"}).then((function(e){return e.json()})).then((function(t){var n=t.Results.map((function(e){return e}));e.setState({gatheringPoints:n})}))}},{key:"render",value:function(){var e=this;if(0===this.state.gatheringPoints.length)return Object(j.jsx)("h3",{children:"Loading..."});for(var t=[],n=0;n<this.state.gatheringPoints.length;n++)for(var r in[0,1,2,3,4,5,6,7])this.state.gatheringPoints[n].GatheringPointBase["Item".concat(r)].Item.ID===this.props.gatheringItemID&&t.push(this.state.gatheringPoints[n]);for(var a=[],s=0;s<t.length;s++)a.includes(t[s].TerritoryType.Map.PlaceNameRegion.Name)||a.push(t[s].TerritoryType.Map.PlaceNameRegion.Name);for(var c=[],o=0;o<t.length;o++)c.includes(t[o].TerritoryType.Map.PlaceName.Name)||c.push(t[o].TerritoryType.Map.PlaceName.Name);for(var l=[],h=0;h<t.length;h++)l.includes(t[h].PlaceName.Name)||l.push(t[h].PlaceName.Name);for(var p=[],u=this.props.mapData,d=0;d<u.length;d++)for(var m=0;m<t.length;m++)t[m].ID===u[d].ID&&p.push(u[d]);return Object(j.jsx)(j.Fragment,{children:a.map((function(n,r){return null!==n?Object(j.jsxs)(i.a.Fragment,{children:[Object(j.jsxs)("h2",{onClick:e.props.toggleTerritories,children:[e.props.selectedTerritory.includes(n)?Object(j.jsx)(O.a,{}):Object(j.jsx)(O.b,{})," ",n," (",t.filter((function(e){return e.TerritoryType.Map.PlaceNameRegion.Name===n})).length," nodes)"]}),c.map((function(r,i){return t.filter((function(e){return e.TerritoryType.Map.PlaceNameRegion.Name===n&&e.TerritoryType.Map.PlaceName.Name===r})).length>0?Object(j.jsxs)("div",{className:e.props.selectedTerritory.includes(n)?"":"invisible",children:[Object(j.jsxs)("h3",{onClick:e.props.toggleRegions,children:[e.props.selectedRegion.includes(r)?Object(j.jsx)(O.a,{}):Object(j.jsx)(O.b,{})," ",r]}),Object(j.jsx)(f,{url:"https://xivapi.com".concat(t.filter((function(e){return e.TerritoryType.Map.PlaceName.Name===r}))[0].TerritoryType.Map.MapFilename),nodes:t.filter((function(e){return e.TerritoryType.Map.PlaceName.Name===r})),mapData:u,selectedRegion:e.props.selectedRegion})]},i):Object(j.jsx)("div",{className:"invisible"},i)}))]},r):Object(j.jsx)("div",{},r)}))})}}]),n}(r.Component),v=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).state={selectedTerritory:"",selectedRegion:""},e.toggleTerritories=e.toggleTerritories.bind(Object(l.a)(e)),e.toggleRegions=e.toggleRegions.bind(Object(l.a)(e)),e}return Object(o.a)(n,[{key:"toggleTerritories",value:function(e){var t=e.target.innerText;e.target.innerText&&(this.setState({selectedRegion:""}),this.state.selectedTerritory===t?this.setState({selectedTerritory:""}):this.setState({selectedTerritory:t}))}},{key:"toggleRegions",value:function(e){var t=e.target.innerText;e.target.innerText&&(this.state.selectedRegion===t?this.setState({selectedRegion:""}):this.setState({selectedRegion:t}))}},{key:"render",value:function(){if(this.props.obj.length>1){var e="https://xivapi.com"+this.props.obj[3];return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("img",{align:"right",src:e,alt:"Gathering item"}),Object(j.jsx)("h2",{children:this.props.obj[0]})]}),Object(j.jsx)(I,{gatheringItemID:this.props.obj[1],toggleTerritories:this.toggleTerritories,toggleRegions:this.toggleRegions,selectedTerritory:this.state.selectedTerritory,selectedRegion:this.state.selectedRegion,mapData:this.props.mapData})]})}return 1===this.props.obj.length?Object(j.jsxs)("h3",{children:[this.props.obj[0],"!"]}):Object(j.jsx)("div",{})}}]),n}(r.Component),x=function(){return Object(j.jsx)("nav",{children:Object(j.jsx)("h1",{children:"CraFFtr"})})},y=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).state={searchString:"",searchResults:[],selectedObj:[],selectedObjResults:[],lastIndex:0,mapData:[]},e.updateSearchTerm=e.updateSearchTerm.bind(Object(l.a)(e)),e.performSearch=e.performSearch.bind(Object(l.a)(e)),e.updateSelectedObj=e.updateSelectedObj.bind(Object(l.a)(e)),e.lookupItem=e.lookupItem.bind(Object(l.a)(e)),e.lookupRecipe=e.lookupRecipe.bind(Object(l.a)(e)),e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=[];fetch("/MappyData.json").then((function(e){return e.json()})).then((function(t){return t.map((function(t){return e.push(t),t}))})),this.setState({mapData:e})}},{key:"updateSearchTerm",value:function(e){this.setState({searchString:e})}},{key:"performSearch",value:function(){var e=this,t="https://xivapi.com/search?string="+this.state.searchString.replace(" ","%20")+"&private_key=e26deb9e33ec4b55b16bcae6b3a97f17443d603ee51f49679f6e3279d8fa95f7";this.setState({selectedObj:[],selectedObjResults:[],searchResults:[]}),fetch(t,{mode:"cors"}).then((function(e){return e.json()})).then((function(t){var n=t.Results.map((function(t){return t.itemId=e.state.lastIndex,e.setState({lastIndex:e.state.lastIndex+1}),t}));e.setState({searchResults:n})}))}},{key:"lookupItem",value:function(e){var t=this,n="https://xivapi.com"+e.Url+"?private_key=e26deb9e33ec4b55b16bcae6b3a97f17443d603ee51f49679f6e3279d8fa95f7";fetch(n,{mode:"cors"}).then((function(e){return e.json()})).then((function(e){e.GameContentLinks.hasOwnProperty("GatheringItem")?t.setState({selectedObjResults:[e.Name,e.ID,e.GameContentLinks.GatheringItem.Item[0],e.Icon]}):t.setState({selectedObjResults:["".concat(e.Name," is not a gathering item")]})}))}},{key:"lookupRecipe",value:function(e){var t=this,n="https://xivapi.com/recipe/".concat(e.ID,"?columns=ID,Icon,RecipeLevelTable,AmountIngredient0,AmountIngredient1,AmountIngredient2,AmountIngredient3,AmountIngredient4,AmountIngredient5,AmountIngredient6,AmountIngredient7,AmountIngredient8,AmountIngredient9,AmountResult,ClassJob.Abbreviation,ClassJob.Icon,ItemIngredient0,ItemIngredient1,ItemIngredient2,ItemIngredient3,ItemIngredient4,ItemIngredient5,ItemIngredient6,ItemIngredient7,ItemIngredient8,ItemIngredient9,ItemIngredientRecipe0,ItemIngredientRecipe1,ItemIngredientRecipe2,ItemIngredientRecipe3,ItemIngredientRecipe4,ItemIngredientRecipe5,ItemIngredientRecipe6,ItemIngredientRecipe7,ItemIngredientRecipe8,ItemIngredientRecipe9,ItemResult");this.setState({selectedObjResults:[]}),fetch(n,{mode:"cors"}).then((function(e){return e.json()})).then((function(e){t.setState({selectedObjResults:e})}))}},{key:"updateSelectedObj",value:function(e){this.setState({selectedObj:e}),"Recipe"===e.UrlType?this.lookupRecipe(e):this.lookupItem(e)}},{key:"render",value:function(){var e=this;return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(u.a,{children:Object(j.jsxs)("div",{className:"app",children:[Object(j.jsx)(x,{}),Object(j.jsx)("div",{id:"page-body",children:Object(j.jsxs)(d.c,{children:[Object(j.jsx)(d.a,{path:"/",render:function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(g,{updateSearchTerm:e.updateSearchTerm,updateSelectedObj:e.updateSelectedObj,performSearch:e.performSearch,searchString:e.state.searchString,searchResults:e.state.searchResults,selectedObj:e.state.selectedObj}),Object(j.jsx)(v,{obj:e.state.selectedObjResults,mapData:e.state.mapData}),Object(j.jsx)(b,{obj:e.state.selectedObjResults})]})},exact:!0}),Object(j.jsx)(d.a,{path:"/crafting",component:b,exact:!0})]})})]})})})}}]),n}(r.Component),T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,38)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),i(e),a(e),s(e)}))};s.a.render(Object(j.jsx)(i.a.StrictMode,{children:Object(j.jsx)(y,{})}),document.getElementById("root")),T()}},[[37,1,2]]]);
//# sourceMappingURL=main.bc00664e.chunk.js.map