(this.webpackJsonpcrafftr=this.webpackJsonpcrafftr||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var i=n(1),r=n.n(i),a=n(9),s=n.n(a),c=(n(14),n(2)),o=n(3),l=n(6),h=n(5),p=n(4),u=(n(15),n(0)),m=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).handleClick=function(){e.props.handleClick(e.state.result)},e.state={result:[]},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.setState({result:this.props.result})}},{key:"render",value:function(){return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("tr",{className:this.props.selectedObj.ID===this.state.result.ID?"row selected":"row",children:Object(u.jsx)("td",{onClick:this.handleClick,children:this.state.result.Name})})})}}]),n}(i.Component),d=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(c.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).handleSearch=function(t){t.preventDefault(),e.props.performSearch()},e.handleChange=function(t){e.props.updateSearchTerm(t.target.value)},e.handleClick=function(t){e.props.updateSelectedObj(t)},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props.searchResults.filter((function(e){return"Item"===e.UrlType}));t=t.map((function(t,n){return Object(u.jsx)(r.a.Fragment,{children:Object(u.jsx)(m,{result:t,filterBy:"item",handleClick:e.handleClick,selectedObj:e.props.selectedObj})},n)}));var n=this.props.searchResults.filter((function(e){return"Recipe"===e.UrlType}));return n=n.map((function(t,n){return Object(u.jsx)(r.a.Fragment,{children:Object(u.jsx)(m,{result:t,filterBy:"recipe",handleClick:e.handleClick,selectedObj:e.props.selectedObj})},n)})),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("form",{id:"searchForm",onSubmit:this.handleSearch,children:[Object(u.jsx)("p",{children:"Search for an item to get started:"}),Object(u.jsx)("input",{type:"text",placeholder:"Type here to search...",value:this.props.searchString,onChange:this.handleChange}),Object(u.jsx)("button",{type:"submit",className:"",children:"Search"})]}),Object(u.jsx)("p",{className:0===t.length?"invisible":""}),Object(u.jsxs)("table",{className:0===t.length?"invisible":"table",children:[Object(u.jsx)("thead",{children:Object(u.jsx)("tr",{className:"row header",children:Object(u.jsx)("th",{children:"Items"})})}),Object(u.jsx)("tbody",{children:t})]}),Object(u.jsx)("p",{className:0===n.length?"invisible":""}),Object(u.jsxs)("table",{className:0===n.length?"invisible":"table",children:[Object(u.jsx)("thead",{children:Object(u.jsx)("tr",{className:"row header",children:Object(u.jsx)("th",{children:"Recipes"})})}),Object(u.jsx)("tbody",{children:n})]})]})}}]),n}(i.Component),g=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).state={recipe:[]},e.getRecipe=e.getRecipe.bind(Object(l.a)(e)),e.handleClick=e.handleClick.bind(Object(l.a)(e)),e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.getRecipe(this.props.recipeID)}},{key:"getRecipe",value:function(e){var t=this,n="https://xivapi.com/recipe/".concat(e,"?columns=ID,Icon,RecipeLevelTable,AmountIngredient0,AmountIngredient1,AmountIngredient2,AmountIngredient3,AmountIngredient4,AmountIngredient5,AmountIngredient6,AmountIngredient7,AmountIngredient8,AmountIngredient9,AmountResult,ClassJob.Abbreviation,ClassJob.Icon,ItemIngredient0,ItemIngredient1,ItemIngredient2,ItemIngredient3,ItemIngredient4,ItemIngredient5,ItemIngredient6,ItemIngredient7,ItemIngredient8,ItemIngredient9,ItemIngredientRecipe0,ItemIngredientRecipe1,ItemIngredientRecipe2,ItemIngredientRecipe3,ItemIngredientRecipe4,ItemIngredientRecipe5,ItemIngredientRecipe6,ItemIngredientRecipe7,ItemIngredientRecipe8,ItemIngredientRecipe9,ItemResult");fetch(n,{mode:"cors"}).then((function(e){return e.json()})).then((function(e){t.setState({recipe:e})}))}},{key:"handleClick",value:function(e){var t=this,n=e.target.innerText,i=[];for(var r in[0,1,2,3,4,5,6,7,8,9])i.push(this.state.recipe["ItemIngredient".concat(r)]);i.map((function(e){return null!==e&&e.hasOwnProperty("Name")&&n.includes(e.Name)&&t.props.lookupItem(e),e}))}},{key:"render",value:function(){var e=this;if(0===this.state.recipe.length)return Object(u.jsx)("div",{className:"invisible"});var t=[],i=[],a=[];for(var s in[0,1,2,3,4,5,6,7,8,9])t.push(this.state.recipe["AmountIngredient".concat(s)]),i.push(this.state.recipe["ItemIngredient".concat(s)]),a.push(this.state.recipe["ItemIngredientRecipe".concat(s)]);return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("ul",{className:"cool-list",children:t.map((function(t,s){return t>0?a[s]?Object(u.jsxs)(r.a.Fragment,{children:[Object(u.jsxs)("li",{id:"parent-material",children:[i[s].Name," (x",t,")"]}),Object(u.jsx)(n,{recipeID:a[s][0].ID,lookupItem:e.props.lookupItem})]},s):Object(u.jsxs)("li",{id:"base-material",onClick:e.handleClick,children:[i[s].Name," (x",t,")"]},s):Object(u.jsx)("div",{className:"invisible"})}))})})}}]),n}(i.Component),j=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).state={itemToBeCrafted:[],ingredientAmounts:[],ingredients:[]},e}return Object(o.a)(n,[{key:"render",value:function(){return this.props.obj.hasOwnProperty("AmountIngredient0")?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("img",{align:"right",src:"https://xivapi.com".concat(this.props.obj.ItemResult.Icon),alt:"Recipe item"}),Object(u.jsx)("h2",{children:this.props.obj.ItemResult.Name})]}),Object(u.jsx)(g,{recipeID:this.props.obj.ID,lookupItem:this.props.lookupItem})]}):Object(u.jsx)("div",{className:"invisible"})}}]),n}(i.Component),I=n(7),b=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=window.innerWidth>420?1:.75;return Object(u.jsxs)("div",{className:this.props.selectedRegion.includes(this.props.nodes[0].TerritoryType.Map.PlaceName.Name)?"":"invisible",id:"map-container",children:[Object(u.jsx)("img",{id:"map",src:this.props.url,alt:"Map"}),this.props.nodes.map((function(n,i){return Object(u.jsx)("img",{src:"https://xivapi.com".concat(n.GatheringPointBase.GatheringType.IconMain),alt:"i",style:{position:"absolute",width:32*t,height:32*t,top:e.props.mapData.filter((function(e){return e.ID===n.ID}))[0].PixelY/(window.innerWidth>420?2:5.12)-16*t,left:e.props.mapData.filter((function(e){return e.ID===n.ID}))[0].PixelX/(window.innerWidth>420?2:5.12)-16*t}},i)}))]})}}]),n}(i.Component),O=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).state={gatheringPoints:[],gatheringPointData:[]},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=this;fetch("https://xivapi.com/GatheringPoint?limit=-1&columns=ID,GatheringPointBase.ID,GatheringPointBase.GatheringLevel,GatheringPointBase.GatheringType.ID,GatheringPointBase.GatheringType.Name,GatheringPointBase.GatheringType.IconMain,TerritoryType.Map.ID,TerritoryType.Map.PlaceNameRegion.Name,TerritoryType.Map.PlaceName.Name,GatheringPointBase.Item0.Item.ID,GatheringPointBase.Item1.Item.ID,GatheringPointBase.Item2.Item.ID,GatheringPointBase.Item3.Item.ID,GatheringPointBase.Item4.Item.ID,GatheringPointBase.Item5.Item.ID,GatheringPointBase.Item6.Item.ID,GatheringPointBase.Item7.Item.ID,PlaceName.Name,TerritoryType.Map.MapFilename",{mode:"cors"}).then((function(e){return e.json()})).then((function(t){var n=t.Results.map((function(e){return e}));e.setState({gatheringPoints:n})}))}},{key:"render",value:function(){var e=this;if(0===this.state.gatheringPoints.length)return Object(u.jsx)("h3",{children:"Loading..."});for(var t=[],n=0;n<this.state.gatheringPoints.length;n++)for(var i in[0,1,2,3,4,5,6,7])this.state.gatheringPoints[n].GatheringPointBase["Item".concat(i)].Item.ID===this.props.gatheringItemID&&t.push(this.state.gatheringPoints[n]);for(var a=[],s=0;s<t.length;s++)a.includes(t[s].TerritoryType.Map.PlaceNameRegion.Name)||a.push(t[s].TerritoryType.Map.PlaceNameRegion.Name);for(var c=[],o=0;o<t.length;o++)c.includes(t[o].TerritoryType.Map.PlaceName.Name)||c.push(t[o].TerritoryType.Map.PlaceName.Name);for(var l=[],h=0;h<t.length;h++)l.includes(t[h].PlaceName.Name)||l.push(t[h].PlaceName.Name);for(var p=[],m=this.props.mapData,d=0;d<m.length;d++)for(var g=0;g<t.length;g++)t[g].ID===m[d].ID&&p.push(m[d]);return Object(u.jsx)(u.Fragment,{children:a.map((function(n,i){return null!==n?Object(u.jsxs)(r.a.Fragment,{children:[Object(u.jsxs)("h2",{onClick:e.props.toggleTerritories,children:[e.props.selectedTerritory.includes(n)?Object(u.jsx)(I.a,{}):Object(u.jsx)(I.b,{})," ",n," (",t.filter((function(e){return e.TerritoryType.Map.PlaceNameRegion.Name===n})).length," nodes)"]}),c.map((function(i,r){return t.filter((function(e){return e.TerritoryType.Map.PlaceNameRegion.Name===n&&e.TerritoryType.Map.PlaceName.Name===i})).length>0?Object(u.jsxs)("div",{className:e.props.selectedTerritory.includes(n)?"":"invisible",children:[Object(u.jsxs)("h3",{onClick:e.props.toggleRegions,children:[e.props.selectedRegion.includes(i)?Object(u.jsx)(I.a,{}):Object(u.jsx)(I.b,{})," ",i]}),Object(u.jsx)(b,{url:"https://xivapi.com".concat(t.filter((function(e){return e.TerritoryType.Map.PlaceName.Name===i}))[0].TerritoryType.Map.MapFilename),nodes:t.filter((function(e){return e.TerritoryType.Map.PlaceName.Name===i})),mapData:m,selectedRegion:e.props.selectedRegion})]},r):Object(u.jsx)("div",{className:"invisible"},r)}))]},i):Object(u.jsx)("div",{},i)}))})}}]),n}(i.Component),f=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).state={selectedTerritory:"",selectedRegion:""},e.toggleTerritories=e.toggleTerritories.bind(Object(l.a)(e)),e.toggleRegions=e.toggleRegions.bind(Object(l.a)(e)),e}return Object(o.a)(n,[{key:"toggleTerritories",value:function(e){var t=e.target.innerText;e.target.innerText&&(this.setState({selectedRegion:""}),this.state.selectedTerritory===t?this.setState({selectedTerritory:""}):this.setState({selectedTerritory:t}))}},{key:"toggleRegions",value:function(e){var t=e.target.innerText;e.target.innerText&&(this.state.selectedRegion===t?this.setState({selectedRegion:""}):this.setState({selectedRegion:t}))}},{key:"render",value:function(){if(this.props.obj.length>1){var e="https://xivapi.com"+this.props.obj[3];return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("img",{align:"right",src:e,alt:"Gathering item"}),Object(u.jsx)("h2",{children:this.props.obj[0]})]}),Object(u.jsx)(O,{gatheringItemID:this.props.obj[1],toggleTerritories:this.toggleTerritories,toggleRegions:this.toggleRegions,selectedTerritory:this.state.selectedTerritory,selectedRegion:this.state.selectedRegion,mapData:this.props.mapData})]})}return 1===this.props.obj.length?Object(u.jsxs)("h3",{children:[this.props.obj[0],"!"]}):Object(u.jsx)("div",{})}}]),n}(i.Component),v=function(){return Object(u.jsx)("nav",{children:Object(u.jsx)("h1",{children:"CraFFtr"})})},x=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).state={searchString:"",searchResults:[],selectedObj:[],gatheringItemResults:[],craftingItemResults:[],lastIndex:0,mapData:[]},e.updateSearchTerm=e.updateSearchTerm.bind(Object(l.a)(e)),e.performSearch=e.performSearch.bind(Object(l.a)(e)),e.updateSelectedObj=e.updateSelectedObj.bind(Object(l.a)(e)),e.lookupItem=e.lookupItem.bind(Object(l.a)(e)),e.lookupRecipe=e.lookupRecipe.bind(Object(l.a)(e)),e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=[];fetch("./MappyData.json",{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(t){return t.map((function(t){return e.push(t),t}))})),this.setState({mapData:e})}},{key:"updateSearchTerm",value:function(e){this.setState({searchString:e})}},{key:"performSearch",value:function(){var e=this,t="https://xivapi.com/search?string=".concat(this.state.searchString.replace(" ","%20"));this.setState({gatheringItemResults:[],craftingItemResults:[],searchResults:[]}),fetch(t,{mode:"cors"}).then((function(e){return e.json()})).then((function(t){var n=t.Results.map((function(t){return t.itemId=e.state.lastIndex,e.setState({lastIndex:e.state.lastIndex+1}),t}));e.setState({searchResults:n})}))}},{key:"lookupItem",value:function(e){var t=this,n="https://xivapi.com/item/".concat(e.ID);fetch(n,{mode:"cors"}).then((function(e){return e.json()})).then((function(e){e.GameContentLinks.hasOwnProperty("GatheringItem")?t.setState({gatheringItemResults:[e.Name,e.ID,e.GameContentLinks.GatheringItem.Item[0],e.Icon]}):t.setState({gatheringItemResults:["".concat(e.Name," cannot be gathered")]})}))}},{key:"lookupRecipe",value:function(e){var t=this,n="https://xivapi.com/recipe/".concat(e.ID,"?columns=ID,Icon,RecipeLevelTable,AmountIngredient0,AmountIngredient1,AmountIngredient2,AmountIngredient3,AmountIngredient4,AmountIngredient5,AmountIngredient6,AmountIngredient7,AmountIngredient8,AmountIngredient9,AmountResult,ClassJob.Abbreviation,ClassJob.Icon,ItemIngredient0,ItemIngredient1,ItemIngredient2,ItemIngredient3,ItemIngredient4,ItemIngredient5,ItemIngredient6,ItemIngredient7,ItemIngredient8,ItemIngredient9,ItemIngredientRecipe0,ItemIngredientRecipe1,ItemIngredientRecipe2,ItemIngredientRecipe3,ItemIngredientRecipe4,ItemIngredientRecipe5,ItemIngredientRecipe6,ItemIngredientRecipe7,ItemIngredientRecipe8,ItemIngredientRecipe9,ItemResult");this.setState({selectedObjResults:[],craftingItemResults:[]}),fetch(n,{mode:"cors"}).then((function(e){return e.json()})).then((function(e){t.setState({craftingItemResults:e})}))}},{key:"updateSelectedObj",value:function(e){this.setState({selectedObj:e,gatheringItemResults:[],craftingItemResults:[]}),"Recipe"===e.UrlType?this.lookupRecipe(e):this.lookupItem(e)}},{key:"render",value:function(){return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"app",children:[Object(u.jsx)(v,{}),Object(u.jsxs)("div",{id:"page-body",children:[Object(u.jsx)(d,{updateSearchTerm:this.updateSearchTerm,updateSelectedObj:this.updateSelectedObj,performSearch:this.performSearch,searchString:this.state.searchString,searchResults:this.state.searchResults,selectedObj:this.state.selectedObj}),Object(u.jsx)(j,{obj:this.state.craftingItemResults,lookupItem:this.lookupItem}),Object(u.jsx)(f,{obj:this.state.gatheringItemResults,mapData:this.state.mapData})]})]})})}}]),n}(i.Component),y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),i(e),r(e),a(e),s(e)}))};s.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(x,{})}),document.getElementById("root")),y()}},[[17,1,2]]]);
//# sourceMappingURL=main.37bc4d20.chunk.js.map